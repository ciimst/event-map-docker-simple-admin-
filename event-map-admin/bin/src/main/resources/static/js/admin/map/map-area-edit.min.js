var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");var ADD_LINK=contextPath+"admin/map/map-area/add",SAVE_LINK=contextPath+"admin/map/map-area/save",MapAreaMiniMap=function(a){return MiniMap.call(this,a)||this};$jscomp.inherits(MapAreaMiniMap,MiniMap);
MapAreaMiniMap.prototype.preInit=function(){this.layerItemDom=this.polygon=void 0;try{var a=JSON.parse(mapAreaItem.coordinateInfo);this.coordinates=a?[a]:[]}catch(b){this.coordinates=[]}try{this.mapAreaGroup=this.getMapAreaGroupById(mapAreaItem.mapAreaGroupId)}catch(b){this.mapAreaGroup=null}};
MapAreaMiniMap.prototype.loadItems=function(){var a=this.getCurrentMapAreaGroup();if(a){var b={color:a.color};this.polygon&&this.removeLayer(this.polygon);this.coordinates&&0!==this.coordinates.length&&(this.polygon=L.polygon(this.coordinates,b),this.polygon.bindPopup(mapAreaItem.title+" ("+a.name+")"),this.addLayer(this.polygon),this.map.setView(this.polygon.getBounds().getCenter(),4))}};
MapAreaMiniMap.prototype.onCreated=function(a){var b=a.layer;this.polygon?custombox.alertError("Sadece 1 polygon ekleyebilirsiniz"):(this.polygon=b,this.reloadCoordinates(),MiniMap.prototype.onCreated.call(this,a))};MapAreaMiniMap.prototype.onEdited=function(a){var b=this;a.layers.eachLayer(function(a){b.polygon=a;b.reloadCoordinates()})};MapAreaMiniMap.prototype.onDeleted=function(a){this.polygon=void 0;this.reloadCoordinates()};
MapAreaMiniMap.prototype.initUiTriggers=function(){var a=this;$("#coordinateInfo").on("change",function(){var b=$(this);clearTimeout(a.coordinateTimeout);a.coordinateTimeout=setTimeout(function(){var c=b.val();try{var d=JSON.parse(c);a.coordinates=d?[d]:null}catch(e){a.coordinates=null}a.loadItems()},300)});$("#mapAreaGroupId").on("change",function(){a.setMapAreaGroupById($(this).val());a.updateLayerItem();a.loadItems()});this.addLayerItem()};
MapAreaMiniMap.prototype.getExpandStyles=function(){return{top:"-170px",height:"455px",width:"200%"}};MapAreaMiniMap.prototype.getDrawOptions=function(){var a=MiniMap.prototype.getDrawOptions.call(this);a.draw.polygon={allowIntersection:!1};a.draw.marker=!1;a.edit.remove=!0;return a};MapAreaMiniMap.prototype.reloadCoordinates=function(){this.coordinates=this.polygon?this.polygon.getLatLngs()[0].map(function(a){return[a.lat,a.lng]}):[];this.invalidateCoordinateInfo()};
MapAreaMiniMap.prototype.addLayerItem=function(){var a=this;L.Control.LayerItem=L.Control.extend({onAdd:function(b){b=L.DomUtil.create("div");Object.assign(b.style,{backgroundColor:"#fff",fontWeight:"bold",padding:"5px 10px 5px 10px"});b.innerHTML=a.getCurrentMapAreaGroup().layerName;a.layerItemDom=b;return a.layerItemDom},onRemove:function(a){}});L.control.layerItem=function(a){return new L.Control.LayerItem(a)};L.control.layerItem({position:"topright"}).addTo(this.getMap())};
MapAreaMiniMap.prototype.updateLayerItem=function(){this.layerItemDom.innerHTML=this.getCurrentMapAreaGroup().layerName};MapAreaMiniMap.prototype.invalidateCoordinateInfo=function(){var a=JSON.stringify(this.coordinates).replace(/[0-9](],)/g,"],\n\t").replace(/(],\[)/g,"],\n [").replace(/(]])/g,"]\n]").replace(/(\[\[\[)/g,"[\n [\n\t[").replace(/(\[\[)/g,"[\n\t[").replace(/(\[\[)/g,"[\n\t[").replace(/(]])/g," ]\n]");$("#coordinateInfo").val(a)};
MapAreaMiniMap.prototype.setMapAreaGroupById=function(a){this.mapAreaGroup=this.getMapAreaGroupById(a)};MapAreaMiniMap.prototype.getMapAreaGroupById=function(a){a=parseInt(a);return mapAreaGroupItems.filter(function(b){return b.id===a})[0]};MapAreaMiniMap.prototype.getCurrentMapAreaGroup=function(){return this.mapAreaGroup};var mapAreaMiniMap=new MapAreaMiniMap("mapid");
$(document).ready(function(){$("#m_aside_left_minimize_toggle").on("click",function(){setTimeout(function(){mapAreaMiniMap.getMap().invalidateSize()},300)});mapAreaNotFound&&custombox.alertError(lang.get("label.mapArea.not.found"),function(){window.location.href=ADD_LINK});$("#save-button").on("click",function(){validate()&&($("form.map-area-form").serializeArray(),$("#coordinateInfo").val()?custombox.confirm("Kaydetmek istedi\u011finize emin misiniz?",function(a){a&&saveMapArea()}):custombox.confirm("Konum bilgisini bo\u015f b\u0131rakt\u0131n\u0131z. Devam etmek istiyor musunuz?",
function(a){a&&saveMapArea()}))});$("form.map-area-form").find("#id").val()?$(".edit-page-title").html(lang.get("label.map_area_edit")):$(".edit-page-title").html(lang.get("label.map_area_add"))});function validate(){return $("#title").val()?$("#mapAreaGroupId").val()?!0:(custombox.alertError(lang.get("label.mapAreaGroup.not.found")),!1):(custombox.alertError("L\u00fctfen ba\u015fl\u0131k alan\u0131n\u0131 bo\u015f b\u0131rakmay\u0131n\u0131z."),!1)}
function saveMapArea(){var a=$("form.map-area-form").serializeArray();$.post(SAVE_LINK,a).fail(function(a){a.state=!1;console.error(a);a.description=lang.get("label.unknown.error");a.redirectUrl=null}).always(function(a){a.state?custombox.alertSuccess(a.description,function(){a.redirectUrl&&(window.location.href=contextPath+a.redirectUrl)}):custombox.alertError(a.description?a.description:lang.get("label.unknown.error"))})};
